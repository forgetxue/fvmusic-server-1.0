(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b52137d"],{4281:function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"main_wrapper"},[t("div",{staticClass:"publish_wrapper"},[t("el-form",{ref:"articleParam",attrs:{model:a.articleParam,rules:a.rules}},[t("el-form-item",{attrs:{prop:"name"}},[t("label",{staticClass:"label",staticStyle:{"font-size":"23px","font-weight":"800"},attrs:{for:"title"}},[a._v("标题")]),t("el-input",{attrs:{id:"title"},model:{value:a.articleParam.name,callback:function(e){a.$set(a.articleParam,"name",e)},expression:"articleParam.name"}})],1),t("el-form-item",{attrs:{prop:"content"}},[t("label",{staticClass:"label",staticStyle:{"font-size":"22px","font-weight":"800"},attrs:{for:"content"}},[a._v("说出你听到的景")]),t("el-input",{attrs:{id:"content",type:"textarea",autosize:{minRows:10,maxRows:20}},model:{value:a.articleParam.content,callback:function(e){a.$set(a.articleParam,"content",e)},expression:"articleParam.content"}})],1),t("el-form-item",[t("el-input",{staticStyle:{display:"none"},model:{value:a.articleParam.poolId,callback:function(e){a.$set(a.articleParam,"poolId",e)},expression:"articleParam.poolId"}})],1),t("el-form-item",[t("label",{staticStyle:{"font-size":"22px","font-weight":"800"},attrs:{for:"pool"}},[a._v("发布到")]),t("el-input",{attrs:{disabled:"",id:"pool"},model:{value:a.articleParam.poolName,callback:function(e){a.$set(a.articleParam,"poolName",e)},expression:"articleParam.poolName"}})],1),t("el-form-item",{staticStyle:{display:"none"}},[t("el-input",{attrs:{disabled:""},model:{value:a.articleParam.userId,callback:function(e){a.$set(a.articleParam,"userId",e)},expression:"articleParam.userId"}})],1),t("el-form-item",{attrs:{prop:"wangYiMusicUrl"}},[t("label",{attrs:{for:"wyUrl"}},[a._v("请输入网易云音乐链接")]),t("el-input",{attrs:{id:"wyUrl"},model:{value:a.articleParam.wangYiMusicUrl,callback:function(e){a.$set(a.articleParam,"wangYiMusicUrl",e)},expression:"articleParam.wangYiMusicUrl"}})],1),t("el-form-item",{staticStyle:{display:"none"}},[t("el-input",{model:{value:a.articleParam.wangYiMusicId,callback:function(e){a.$set(a.articleParam,"wangYiMusicId",e)},expression:"articleParam.wangYiMusicId"}})],1)],1),t("h4",{staticStyle:{"font-size":"23px","font-weight":"800"}},[a._v("上传配图")]),t("div",{staticClass:"upload_wrapper"},[t("upload-photo",{on:{sendUrl:function(e){return a.receiveUrl(e)}}})],1),t("el-button",{staticStyle:{margin:"30px 0 50px 900px"},attrs:{type:"primary",plain:""},on:{click:a.submitArticle}},[a._v("发布")])],1)])},i=[],l=(t("c975"),t("ac1f"),t("5319"),t("2ca0"),t("ba82")),s=t("7d9b"),o={name:"PublishShare",components:{UploadPhoto:l["a"]},data:function(){var a=this,e=function(e,t,r){a.articleParam.wangYiMusicUrl=a.articleParam.wangYiMusicUrl.replace(" ",""),t=a.articleParam.wangYiMusicUrl,""===t?r(new Error("网易云音乐链接不能为空")):t.startsWith("https://music.163.com")?r():r(new Error("输入的链接不合法，请到该音乐主页查看链接"))};return{articleParam:{name:"",content:"",photosUrl:"",poolId:"",poolName:"",wangYiMusicUrl:"",wangYiMusicId:"",userId:this.$store.getters.userInfo.id},rules:{name:[{required:!0,message:"标题不能为空",trigger:"blur"},{max:15,message:"最长不能超过15个字",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}],wangYiMusicUrl:[{validator:e,trigger:"blur"}]}}},methods:{receiveUrl:function(a){console.log(a),this.articleParam.photosUrl=a},submitArticle:function(){var a=this;this.$refs.articleParam.validate((function(e){if(!e)return!1;a.articleParam.wangYiMusicId=a.articleParam.wangYiMusicUrl.substring(a.articleParam.wangYiMusicUrl.indexOf("=")+1),""===a.articleParam.photosUrl&&(a.articleParam.photosUrl="https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"),s["a"].commonJsonPost("/article/create",a.articleParam).then((function(e){200===e.data.code?a.$message.success("发布成功"):a.$message.warning(e.data.message)})).catch((function(e){a.$message.error(e.message)}))}))}},mounted:function(){this.articleParam.poolName=this.$route.query.poolName,this.articleParam.poolId=this.$route.query.poolId}},n=o,c=(t("e45a"),t("2877")),m=Object(c["a"])(n,r,i,!1,null,"49839f98",null);e["default"]=m.exports},4978:function(a,e,t){},e45a:function(a,e,t){"use strict";var r=t("4978"),i=t.n(r);i.a}}]);