(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec9f1d9c"],{"04c1":function(e,t,s){},"5d04":function(e,t,s){"use strict";var n=s("4360"),a={data:{socket:null},initWebSocket:function(){console.log("websocket init");var e=n["a"].getters.userInfo.id;void 0!==e&&""!==e&&null!==e&&(this.socket=new WebSocket("ws://47.116.78.131/websocket/"+e),this.socket.onmessage=this.websocketonmessage,this.socket.onerror=this.websocketonerror,this.socket.onopen=this.websocketonopen,this.socket.onclose=this.websocketclose)},websocketonopen:function(){},websocketonerror:function(){console.log("WebSocket连接失败")},websocketonmessage:function(e){console.log("数据接收======> "),n["a"].commit("setMessage",e.data),console.log(n["a"].state.socketMessage)},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){console.log("已关闭连接",e)}};t["a"]=a},7109:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main_wrapper"},[s("div",{staticClass:"message_wrapper"},e._l(this.messages,(function(t,n){return s("el-collapse",{on:{change:function(t){return e.handleChange(n)}}},[s("el-collapse-item",[s("template",{slot:"title"},[s("div",{staticClass:"message_title"},[s("div",{staticClass:"left"},[s("span",{staticClass:"left",staticStyle:{"padding-left":"50px"}},[s("router-link",{attrs:{to:{path:"/personal/infoDetails",query:{userId:t.userId}}}},[e._v(" "+e._s(t.username)+" ")])],1),s("span",{staticClass:"left"},[e._v(e._s(t.content?" 评论了你的分享":"赞了你的分享 "))]),s("span",{staticClass:"left"},[e._v("《 "+e._s(t.articleName)+" 》")])]),s("div",{staticClass:"right"},[e._v(e._s(e.strDate(t.date))+" "),s("span",[s("el-badge",{attrs:{value:t.value}})],1)])])]),s("p",{staticStyle:{padding:"4px 30px 0"}},[e._v(e._s(t.content))])],2)],1)})),1)])},a=[],o=s("5d04"),c=s("fb92"),i={name:"Message",data:function(){return{messages:[{userId:1,username:"盖聂",articleName:"秦时明月",date:"20202-10-8",message:"",content:"评论内容",value:"new"},{userId:1,username:"盖聂",articleName:"秦时明月",date:"20202-10-8",message:"",content:"",value:"new"},{userId:1,username:"盖聂",articleName:"秦时明月",date:"20202-10-8",message:"",content:"",value:""}]}},methods:{handleChange:function(e){this.$store.commit("setMessageHasRead",e)},StrDate:function(e){return Object(c["b"])(e)}},created:function(){o["a"].initWebSocket()},mounted:function(){this.messages=this.$store.getters.socketMessage},destroyed:function(){o["a"].socket.close()}},r=i,l=(s("c3db"),s("2877")),u=Object(l["a"])(r,n,a,!1,null,"6da1086c",null);t["default"]=u.exports},c3db:function(e,t,s){"use strict";var n=s("04c1"),a=s.n(n);a.a},fb92:function(e,t,s){"use strict";function n(e){var t=new Date(e).getFullYear(),s=new Date(e).getMonth()+1<10?"0"+(new Date(e).getMonth()+1):new Date(e).getMonth()+1,n=new Date(e).getDate()<10?"0"+new Date(e).getDate():new Date(e).getDate();return t+"年"+s+"月"+n+"日"}function a(e){var t=new Date(e).getFullYear(),s=new Date(e).getMonth()+1<10?"0"+(new Date(e).getMonth()+1):new Date(e).getMonth()+1,n=new Date(e).getDate()<10?"0"+new Date(e).getDate():new Date(e).getDate(),a=new Date(e).getHours()<10?"0"+new Date(e).getHours():new Date(e).getHours(),o=new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes();return t+"年"+s+"月"+n+"日"+a+":"+o}s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}))}}]);