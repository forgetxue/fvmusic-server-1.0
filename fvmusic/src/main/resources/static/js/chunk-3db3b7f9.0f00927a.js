(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3db3b7f9"],{"0058":function(e,o,s){"use strict";s.r(o);var t=function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div")},n=[],c=s("5d04"),i={name:"WebSocketTiny",data:function(){return{websocket:null}},methods:{initWebSocket:function(){this.websock=new WebSocket("ws://localhost:8099/fvmusic/websocket/lucy"),this.websock.onmessage=this.websocketonmessage,this.websock.onerror=this.websocketonerror,this.websock.onopen=this.websocketonopen,this.websock.onclose=this.websocketclose},websocketonopen:function(){var e={code:0,msg:"这是client：初次连接"};this.websocketsend(JSON.stringify(e))},websocketonerror:function(){console.log("WebSocket连接失败")},websocketonmessage:function(e){console.log("数据接收"+e.data),alert("你有新消息"+e.data)},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){console.log("已关闭连接",e)}},created:function(){c["a"].initWebSocket()},destroyed:function(){c["a"].socket.close()}},k=i,b=s("2877"),a=Object(b["a"])(k,t,n,!1,null,"71acbac8",null);o["default"]=a.exports},"5d04":function(e,o,s){"use strict";var t=s("4360"),n={data:{socket:null},initWebSocket:function(){console.log("websocket init");var e=t["a"].getters.userInfo.id;void 0!==e&&""!==e&&null!==e&&(this.socket=new WebSocket("ws://47.116.78.131/websocket/"+e),this.socket.onmessage=this.websocketonmessage,this.socket.onerror=this.websocketonerror,this.socket.onopen=this.websocketonopen,this.socket.onclose=this.websocketclose)},websocketonopen:function(){},websocketonerror:function(){console.log("WebSocket连接失败")},websocketonmessage:function(e){console.log("数据接收======> "),t["a"].commit("setMessage",e.data),console.log(t["a"].state.socketMessage)},websocketsend:function(e){this.websock.send(e)},websocketclose:function(e){console.log("已关闭连接",e)}};o["a"]=n}}]);